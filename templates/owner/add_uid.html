{% extends 'base.html' %}

{% block title %}Add UID - Mani 272{% endblock %}

{% block content %}
<h1 style="color: white; margin-bottom: 2rem;">Add New UID</h1>

<div class="card" style="max-width: 800px;">
    <h2 style="margin-bottom: 1.5rem;">UID Details</h2>

    <form method="POST">
        <div class="form-grid-2">
            <div class="form-group">
                <label for="uid">UID *</label>
                <input type="text" id="uid" name="uid" placeholder="Enter UID number" required>
            </div>

            <div class="form-group">
                <label for="uid_name">UID Owner Name *</label>
                <input type="text" id="uid_name" name="uid_name" placeholder="Enter name" required>
            </div>
        </div>

        <div class="form-group">
            <label for="region">Region *</label>
            <select id="region" name="region" required>
                <option value="">Select Region</option>
                {% for r in regions %}
                <option value="{{ r }}">{{ r }}</option>
                {% endfor %}
            </select>
        </div>

        <h3 style="margin-top: 2rem; margin-bottom: 1rem; color: var(--text);">⏱️ Duration</h3>

        <div class="form-grid-4">
            <div class="form-group">
                <label for="years">Years</label>
                <select id="years" name="years" onchange="calculateDuration()">
                    {% for i in range(6) %}
                    <option value="{{ i }}">{{ i }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="months">Months</label>
                <select id="months" name="months" onchange="calculateDuration()">
                    {% for i in range(13) %}
                    <option value="{{ i }}">{{ i }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="days">Days</label>
                <input type="number" id="days" name="days" value="0" min="0" max="365" onchange="calculateDuration()">
            </div>

            <div class="form-group">
                <label for="hours">Hours</label>
                <input type="number" id="hours" name="hours" value="0" min="0" max="23" onchange="calculateDuration()">
            </div>
        </div>

        <div
            style="background: rgba(0, 247, 255, 0.08); padding: 1.2rem; border-radius: 10px; margin: 1.5rem 0; border: 1px solid rgba(0, 247, 255, 0.3);">
            <div
                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                <div>
                    <strong style="color: var(--text); display: block; margin-bottom: 0.5rem;">Total Duration:</strong>
                    <span id="totalDuration" style="color: var(--primary); font-size: 1.3rem; font-weight: 700;">0
                        days</span>
                </div>
                <div>
                    <strong style="color: var(--text); display: block; margin-bottom: 0.5rem;">Credits
                        Required:</strong>
                    <span id="creditsRequired"
                        style="color: var(--success); font-size: 1.3rem; font-weight: 700;">₹0.00</span>
                </div>
            </div>
        </div>

        <div style="display: flex; gap: 1rem; margin-top: 2rem;">
            <button type="submit" class="btn btn-success">Add UID</button>
            <a href="{{ url_for('owner_all_uids') }}" class="btn btn-danger">Cancel</a>
        </div>
    </form>
</div>

<script>
    function calculateDuration() {
        const years = parseInt(document.getElementById('years').value) || 0;
        const months = parseInt(document.getElementById('months').value) || 0;
        const days = parseInt(document.getElementById('days').value) || 0;
        const hours = parseInt(document.getElementById('hours').value) || 0;

        const totalDays = (years * 365) + (months * 30) + days + (hours / 24);
        const credits = totalDays * 0.15;

        document.getElementById('totalDuration').textContent = totalDays.toFixed(1) + ' days';
        document.getElementById('creditsRequired').textContent = '₹' + credits.toFixed(2);
    }

    // Initial calculation
    calculateDuration();
</script>
{% endblock %}